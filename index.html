<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark" />
  <title>Dla mojej Sandrusi ğŸ§¸ğŸ’–</title>
  <meta name="description" content="Sandra, zostaniesz mojÄ… walentynkÄ…?" />

  <style>
    :root{
      --bg1:#070A18;
      --bg2:#1a0820;
      --card:#ffffff10;
      --card2:#ffffff18;
      --text:#f6f7ff;
      --muted:#d7dbffcc;
      --pink:#ff4d7d;
      --aqua:#35d3ff;
      --gold:#ffd66e;
      --ok:#35ff9a;
      --shadow: 0 26px 75px rgba(0,0,0,.50);
    }
    *{ box-sizing:border-box; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    html,body{ height:100%; }
    body{
      margin:0;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 14% 16%, rgba(255,77,125,.22), transparent 62%),
        radial-gradient(900px 620px at 82% 26%, rgba(53,211,255,.16), transparent 62%),
        radial-gradient(980px 980px at 35% 86%, rgba(255,214,110,.12), transparent 68%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }

    .stars{
      position:fixed; inset:0;
      background-image:
        radial-gradient(2px 2px at 12% 22%, rgba(255,255,255,.65), transparent 60%),
        radial-gradient(1px 1px at 20% 78%, rgba(255,255,255,.55), transparent 60%),
        radial-gradient(2px 2px at 44% 34%, rgba(255,255,255,.45), transparent 60%),
        radial-gradient(1px 1px at 58% 66%, rgba(255,255,255,.55), transparent 60%),
        radial-gradient(2px 2px at 76% 18%, rgba(255,255,255,.35), transparent 60%),
        radial-gradient(1px 1px at 86% 82%, rgba(255,255,255,.35), transparent 60%);
      opacity:.34;
      pointer-events:none;
      filter: blur(.1px);
    }

    .hearts{
      position:fixed; inset:0;
      pointer-events:none;
      z-index:1;
      overflow:hidden;
    }
    .heart{
      position:absolute;
      bottom:-44px;
      font-size: 18px;
      opacity:0;
      animation: floatUp linear forwards;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.35));
    }
    @keyframes floatUp{
      0% { transform: translateY(0) translateX(0) scale(.9) rotate(0deg); opacity:0; }
      12%{ opacity:.9; }
      100%{ transform: translateY(-125vh) translateX(var(--dx)) scale(1.55) rotate(18deg); opacity:0; }
    }

    .wrap{
      min-height:100%;
      display:grid;
      place-items:center;
      padding:24px;
      position:relative;
      z-index:2;
    }

    .card{
      width:min(780px, 92vw);
      border-radius: 30px;
      background: linear-gradient(135deg, var(--card), var(--card2));
      border:1px solid rgba(255,255,255,.14);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      padding: 22px 22px 18px;
      position:relative;
      overflow:hidden;
    }

    .glow{
      position:absolute; inset:-90px;
      background:
        radial-gradient(460px 260px at 18% 18%, rgba(255,77,125,.24), transparent 62%),
        radial-gradient(460px 300px at 82% 28%, rgba(53,211,255,.15), transparent 62%),
        radial-gradient(600px 340px at 45% 96%, rgba(255,214,110,.12), transparent 68%);
      filter: blur(8px);
      opacity:.9;
      pointer-events:none;
    }

    /* NEW HEADER (replaces "Tryb: Walentynki Deluxe") */
    .header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom: 10px;
    }
    .sig{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      box-shadow: 0 10px 30px rgba(0,0,0,.18);
    }
    .sig .seal{
      width:42px; height:42px;
      border-radius: 16px;
      display:grid; place-items:center;
      border:1px solid rgba(255,255,255,.16);
      background: linear-gradient(135deg, rgba(255,77,125,.35), rgba(53,211,255,.18));
      transform: rotate(6deg);
      font-size: 20px;
    }
    .sig .text small{
      display:block;
      color:var(--muted);
      line-height:1.1;
      font-size:12px;
    }
    .sig .text strong{
      display:block;
      font-weight: 980;
      letter-spacing: .2px;
      font-size: 14px;
    }
    .chip{
      font-size:12px;
      color:var(--muted);
      padding:8px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.12);
      white-space:nowrap;
    }
    .chip b{ color:#fff; font-weight:950; }

    h1{
      margin: 10px 0 6px;
      font-size: clamp(22px, 3.2vw, 38px);
      letter-spacing:-.55px;
      line-height:1.12;
    }
    .name{ font-weight: 1000; }
    .sub{
      margin:0 0 14px;
      color:var(--muted);
      font-size:14px;
      line-height:1.45;
    }

    /* Teddy block */
    .teddyWrap{
      margin-top: 10px;
      border-radius: 24px;
      padding: 14px 12px 10px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(8,10,18,.24);
      overflow:hidden;
      position:relative;
    }
    .teddyTitle{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
    .teddyTitle .line{
      font-size:12px;
      color:var(--muted);
    }
    .teddySvg{
      width:100%;
      max-height:220px;
      display:block;
    }
    .labels{
      display:flex;
      justify-content:space-between;
      margin-top:8px;
      color:var(--muted);
      font-size:12px;
    }
    .labels b{ color:#fff; font-weight:950; }

    .stage{
      margin-top: 12px;
      border-radius: 24px;
      padding: 18px 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(8,10,18,.28);
      position:relative;
      overflow:hidden;
    }

    .actions{
      height: 190px;
      position: relative;
      margin-top: 10px;
    }

    button, a.btn{
      border:0;
      padding: 12px 18px;
      border-radius: 999px;
      font-weight: 980;
      cursor: pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      transition: transform .12s ease, filter .2s ease;
      letter-spacing:.2px;
      line-height:1;
      white-space:nowrap;
    }
    button:active, a.btn:active{ transform: scale(.98); }
    button:disabled{ opacity:.55; cursor:not-allowed; }

    #yesBtn{
      background: linear-gradient(135deg, rgba(255,77,125,1), rgba(255,214,110,.95));
      color:#1b0b14;
      box-shadow: 0 18px 40px rgba(255,77,125,.18);
      position:absolute;
      left: 50%;
      transform: translateX(-115%);
      top: 66px;
      min-width: 158px;
    }
    #noBtn{
      background: rgba(255,255,255,.14);
      color: #fff;
      border:1px solid rgba(255,255,255,.14);
      position:absolute;
      left: 50%;
      transform: translateX(15%);
      top: 66px;
      min-width: 158px;
    }

    .hint{
      position:absolute;
      left:0; right:0;
      bottom: 2px;
      padding: 0 8px;
      text-align:center;
      font-size: 12px;
      color: var(--muted);
    }

    .result{
      margin-top: 12px;
      min-height: 26px;
      font-size: 15px;
      color:#fff;
    }

    .comic{
      display:none;
      align-items:stretch;
      justify-content:space-between;
      gap:10px;
      margin-top: 12px;
      flex-wrap:wrap;
    }
    .sticker{
      flex: 1 1 220px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      padding: 12px;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .sticker .icon{
      width:44px; height:44px;
      border-radius: 14px;
      display:grid; place-items:center;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.12);
      font-size:22px;
      transform: rotate(-6deg);
    }
    .sticker b{ display:block; }
    .sticker span{ display:block; color:var(--muted); font-size:12px; line-height:1.25; }

    .panel{
      display:none;
      margin-top: 14px;
      padding: 14px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
    }
    .panel h2{
      margin: 0 0 10px;
      font-size: 16px;
      letter-spacing:.1px;
    }
    .q{
      display:grid;
      gap:10px;
      color:var(--text);
    }
    .q .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .btnDark{
      background: rgba(255,255,255,.10);
      color:#fff;
      border:1px solid rgba(255,255,255,.14);
    }
    .btnPrimary{
      background: linear-gradient(135deg, rgba(53,211,255,1), rgba(255,77,125,1));
      color:#0b1026;
    }
    .btnOk{
      background: linear-gradient(135deg, rgba(53,255,154,1), rgba(53,211,255,1));
      color:#071226;
    }
    .tiny{
      margin-top:10px;
      font-size:12px;
      color:var(--muted);
      line-height:1.35;
    }

    canvas.fx{
      position:fixed; inset:0;
      pointer-events:none;
      z-index:3;
    }

    @media (max-width: 420px){
      .actions{ height: 215px; }
      #yesBtn, #noBtn{ min-width: 152px; }
    }
  </style>
</head>

<body>
  <div class="stars"></div>
  <div class="hearts" id="hearts"></div>

  <div class="wrap">
    <div class="card">
      <div class="glow"></div>

      <!-- NEW TOP BAR -->
      <div class="header">
        <div class="sig">
          <div class="seal">ğŸ§¸</div>
          <div class="text">
            <small>specjalnie przygotowane</small>
            <strong>dla mojej Sandrusi ğŸ’–</strong>
          </div>
        </div>
        <div class="chip">âœ¨ unikat â€¢ <b>tylko dla Sandry</b></div>
      </div>

      <h1><span class="name" id="gfName">Sandra</span>, zostaniesz mojÄ… walentynkÄ…? ğŸ’˜</h1>
      <p class="sub" id="sub">
        Sandrusiuâ€¦ jeÅ›li mogÄ™ wybraÄ‡ jedno: zawsze wybieram Ciebie. ğŸ’
        I obiecujÄ™: bÄ™dÄ™ Twoim spokojem, Twoim Å›miechem i Twoim â€wowâ€. â¤ï¸
        (A â€Nieâ€ jest dzisiaj tylko dla Å¼artu ğŸ˜ˆ)
      </p>

      <!-- 2 teddies + heart -->
      <div class="teddyWrap" aria-label="Dwa misie i serce">
        <div class="teddyTitle">
          <div class="line">ğŸ§¸ Ja (z lewej) + Sandra (z prawej) = serce poÅ›rodku ğŸ’–</div>
          <div class="chip">nasza maÅ‚a bajka</div>
        </div>

        <svg class="teddySvg" viewBox="0 0 900 260" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Dwa misie i serce">
          <defs>
            <linearGradient id="furL" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#f3c79e"/>
              <stop offset="1" stop-color="#d6a67e"/>
            </linearGradient>
            <linearGradient id="furR" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#f0b8c9"/>
              <stop offset="1" stop-color="#d88ea7"/>
            </linearGradient>
            <linearGradient id="heartG" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#ff4d7d"/>
              <stop offset="1" stop-color="#ffd66e"/>
            </linearGradient>
            <filter id="soft" x="-20%" y="-20%" width="140%" height="140%">
              <feGaussianBlur stdDeviation="2.8" result="b"/>
              <feMerge>
                <feMergeNode in="b"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
            <filter id="shadow" x="-30%" y="-30%" width="160%" height="160%">
              <feDropShadow dx="0" dy="10" stdDeviation="10" flood-color="rgba(0,0,0,.35)"/>
            </filter>
          </defs>

          <!-- LEFT teddy -->
          <g transform="translate(150,40)" filter="url(#shadow)">
            <circle cx="40" cy="40" r="28" fill="url(#furL)"/>
            <circle cx="140" cy="40" r="28" fill="url(#furL)"/>
            <circle cx="40" cy="40" r="14" fill="rgba(255,255,255,.25)"/>
            <circle cx="140" cy="40" r="14" fill="rgba(255,255,255,.25)"/>

            <circle cx="90" cy="80" r="58" fill="url(#furL)"/>
            <circle cx="70" cy="78" r="6" fill="#14121a"/>
            <circle cx="110" cy="78" r="6" fill="#14121a"/>

            <ellipse cx="90" cy="98" rx="26" ry="20" fill="rgba(255,255,255,.22)"/>
            <circle cx="90" cy="96" r="6" fill="#14121a"/>
            <path d="M90 102 C82 108, 80 114, 76 118" stroke="#14121a" stroke-width="3" fill="none" stroke-linecap="round"/>
            <path d="M90 102 C98 108, 100 114, 104 118" stroke="#14121a" stroke-width="3" fill="none" stroke-linecap="round"/>

            <ellipse cx="90" cy="170" rx="70" ry="62" fill="url(#furL)"/>
            <ellipse cx="34" cy="176" rx="28" ry="22" fill="url(#furL)"/>
            <ellipse cx="146" cy="176" rx="28" ry="22" fill="url(#furL)"/>
            <ellipse cx="34" cy="176" rx="14" ry="10" fill="rgba(255,255,255,.22)"/>
            <ellipse cx="146" cy="176" rx="14" ry="10" fill="rgba(255,255,255,.22)"/>

            <path d="M90 156
                     C90 145, 74 145, 74 157
                     C74 173, 90 182, 90 192
                     C90 182, 106 173, 106 157
                     C106 145, 90 145, 90 156 Z"
                  fill="rgba(255,77,125,.55)"/>
          </g>

          <!-- RIGHT teddy -->
          <g transform="translate(610,40)" filter="url(#shadow)">
            <circle cx="40" cy="40" r="28" fill="url(#furR)"/>
            <circle cx="140" cy="40" r="28" fill="url(#furR)"/>
            <circle cx="40" cy="40" r="14" fill="rgba(255,255,255,.25)"/>
            <circle cx="140" cy="40" r="14" fill="rgba(255,255,255,.25)"/>

            <circle cx="90" cy="80" r="58" fill="url(#furR)"/>
            <circle cx="70" cy="78" r="6" fill="#14121a"/>
            <circle cx="110" cy="78" r="6" fill="#14121a"/>

            <ellipse cx="90" cy="98" rx="26" ry="20" fill="rgba(255,255,255,.22)"/>
            <circle cx="90" cy="96" r="6" fill="#14121a"/>
            <path d="M90 102 C82 108, 80 114, 76 118" stroke="#14121a" stroke-width="3" fill="none" stroke-linecap="round"/>
            <path d="M90 102 C98 108, 100 114, 104 118" stroke="#14121a" stroke-width="3" fill="none" stroke-linecap="round"/>

            <ellipse cx="90" cy="170" rx="70" ry="62" fill="url(#furR)"/>
            <ellipse cx="34" cy="176" rx="28" ry="22" fill="url(#furR)"/>
            <ellipse cx="146" cy="176" rx="28" ry="22" fill="url(#furR)"/>
            <ellipse cx="34" cy="176" rx="14" ry="10" fill="rgba(255,255,255,.22)"/>
            <ellipse cx="146" cy="176" rx="14" ry="10" fill="rgba(255,255,255,.22)"/>

            <path d="M88 54 C78 46, 70 46, 64 56 C70 68, 80 66, 88 60 Z" fill="rgba(255,255,255,.35)"/>
            <path d="M92 54 C102 46, 110 46, 116 56 C110 68, 100 66, 92 60 Z" fill="rgba(255,255,255,.35)"/>
            <circle cx="90" cy="58" r="6" fill="rgba(255,255,255,.45)"/>
          </g>

          <!-- middle heart -->
          <g transform="translate(418,72)" filter="url(#soft)">
            <path d="M32 24
                     C32 12, 12 12, 12 28
                     C12 44, 32 52, 32 68
                     C32 52, 52 44, 52 28
                     C52 12, 32 12, 32 24 Z"
                  fill="url(#heartG)"/>
            <path d="M24 22 C26 16, 34 14, 40 18" stroke="rgba(255,255,255,.55)" stroke-width="3" fill="none" stroke-linecap="round"/>
          </g>

          <g opacity="0.9">
            <circle cx="445" cy="72" r="3" fill="#ffd66e"/>
            <circle cx="468" cy="92" r="2.5" fill="#35d3ff"/>
            <circle cx="418" cy="104" r="2.5" fill="#ff4d7d"/>
            <circle cx="488" cy="122" r="3" fill="#ffffff"/>
            <circle cx="405" cy="78" r="2.5" fill="#ffffff"/>
          </g>
        </svg>

        <div class="labels">
          <div>ğŸ§¸ <b>Ja</b></div>
          <div>â¤ï¸ <b>My</b></div>
          <div><b>Sandra</b> ğŸ§¸</div>
        </div>
      </div>

      <div class="stage">
        <div class="actions" id="arena" aria-label="WybÃ³r">
          <button id="yesBtn">Tak ğŸ’˜</button>
          <button id="noBtn" aria-label="Nie">Nie ğŸ™ƒ</button>
          <div class="hint" id="hint">SprÃ³buj kliknÄ…Ä‡ â€Nieâ€â€¦ jeÅ›li w ogÃ³le je zÅ‚apiesz ğŸ˜‰</div>
        </div>

        <div class="result" id="result"></div>

        <div class="comic" id="comic">
          <div class="sticker">
            <div class="icon">ğŸ†</div>
            <div>
              <b>Fajerwerki</b>
              <span>bo â€Takâ€ to nasz maÅ‚y wybuch szczÄ™Å›cia</span>
            </div>
          </div>
          <div class="sticker">
            <div class="icon">ğŸ’—</div>
            <div>
              <b>Serduszka</b>
              <span>bo Ty jesteÅ› moim ulubionym uczuciem</span>
            </div>
          </div>
          <div class="sticker">
            <div class="icon">âœ¨</div>
            <div>
              <b>Magia</b>
              <span>bo przy Tobie wszystko jest piÄ™kniejsze</span>
            </div>
          </div>
        </div>

        <div class="panel" id="panel">
          <h2 id="qTitle">Pytanie 1/3</h2>
          <div class="q" id="qBox"></div>
          <div class="tiny" id="tiny">
            To nasza walentynkowa ankieta â€” ale odpowiedzi i tak prowadzÄ… do jednego: â€Tyâ€. ğŸ’
          </div>
        </div>
      </div>
    </div>
  </div>

  <canvas class="fx" id="fx"></canvas>

  <script>
    const NAME = "Sandra";
    const YOUR_WA_NUMBER = "436767888866";

    const NO_HINTS = [
      "â€Nieâ€ wÅ‚aÅ›nie zrobiÅ‚o unik jak ninja ğŸ¥·",
      "â€Nieâ€ jest dzisiaj pÅ‚ochliweâ€¦ jak kotek ğŸ˜¼",
      "Ohoâ€¦ â€Nieâ€ uciekÅ‚o. Znowu. ğŸ™ƒ",
      "â€Nieâ€ ma dziÅ› wolne. Oficjalnie. ğŸ˜ˆ",
      "â€Nieâ€ jest tu tylko dekoracjÄ… ğŸ¤«",
      "â€Nieâ€ mÃ³wi: â€sprÃ³buj jeszcze razâ€ ğŸ˜‡"
    ];

    const YES_HEADLINES = [
      "TAAAK! ğŸ’–",
      "Okejâ€¦ to oficjalne ğŸ¥°",
      "No to piÄ™knie! ğŸ’˜",
      "WÅ‚aÅ›nie wygraÅ‚em serce Sandrusi ğŸ˜„ğŸ’"
    ];

    const LOVE_LINES = [
      "Dla mojej Sandrusi â€” zawsze i wszÄ™dzie. ğŸ’–",
      "Kocham CiÄ™ tak, Å¼e nawet nie potrafiÄ™ tego zamknÄ…Ä‡ w zdaniu. â¤ï¸",
      "Z TobÄ… wszystko ma sens. ğŸ’",
      "JesteÅ› mojÄ… ulubionÄ… osobÄ… na Å›wiecie. I juÅ¼. ğŸ’—"
    ];

    const gfName = document.getElementById("gfName");
    gfName.textContent = NAME;

    const yesBtn = document.getElementById("yesBtn");
    const noBtn  = document.getElementById("noBtn");
    const arena  = document.getElementById("arena");
    const hint   = document.getElementById("hint");
    const result = document.getElementById("result");
    const panel  = document.getElementById("panel");
    const qTitle = document.getElementById("qTitle");
    const qBox   = document.getElementById("qBox");
    const comic  = document.getElementById("comic");
    const hearts = document.getElementById("hearts");

    const rnd = (min,max)=> Math.random()*(max-min)+min;
    const pick = (arr)=> arr[Math.floor(Math.random()*arr.length)];
    const clamp = (n,min,max)=> Math.max(min, Math.min(max,n));

    function moveNoButton() {
      const a = arena.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();
      const padding = 10;

      const maxX = Math.max(padding, a.width - b.width - padding);
      const maxY = Math.max(padding, a.height - b.height - padding);

      const x = clamp(padding + Math.random()*(maxX - padding), padding, maxX);
      const y = clamp(padding + Math.random()*(maxY - padding), padding, maxY);

      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
      noBtn.style.transform = "none";
      hint.textContent = pick(NO_HINTS);

      burstAt(x + b.width/2, y + b.height/2, 22, true);
    }
    noBtn.addEventListener("mouseenter", moveNoButton);
    noBtn.addEventListener("click", (e)=>{ e.preventDefault(); moveNoButton(); });
    noBtn.addEventListener("touchstart", (e)=>{ e.preventDefault(); moveNoButton(); }, { passive:false });
    setTimeout(moveNoButton, 260);

    let heartTimer = null;
    function startHearts(){
      if(heartTimer) return;
      heartTimer = setInterval(()=>{
        const el = document.createElement("div");
        el.className = "heart";
        const pool = ["ğŸ’—","ğŸ’–","ğŸ’˜","â¤ï¸","ğŸ’•","ğŸ’","ğŸ’"];
        el.textContent = pool[Math.floor(Math.random()*pool.length)];
        el.style.left = rnd(0, 100) + "vw";
        el.style.setProperty("--dx", rnd(-24,24) + "vw");
        el.style.animationDuration = rnd(4.0, 7.0) + "s";
        hearts.appendChild(el);
        setTimeout(()=> el.remove(), 8200);
      }, 220);
    }

    const answers = { like:null, nextDate:null, love:null };

    const steps = [
      {
        title: "Pytanie 1/3",
        render: () => `
          <div>Sandrusiuâ€¦ czy podoba Ci siÄ™ ta niespodzianka? ğŸ¥ºğŸ’—</div>
          <div class="row">
            <button class="btnOk" data-a="like" data-v="Tak, jest przeurocza ğŸ’–">Tak, jest przeurocza ğŸ’–</button>
            <button class="btnPrimary" data-a="like" data-v="Tak, i zrobiÅ‚o mi siÄ™ cieplutko ğŸ¥°">Tak, cieplutko ğŸ¥°</button>
            <button class="btnDark" data-a="like" data-v="Tak, ale chcÄ™ jeszcze wiÄ™cej serduszek ğŸ˜‚ğŸ’">WiÄ™cej serduszek ğŸ˜‚ğŸ’</button>
          </div>
        `
      },
      {
        title: "Pytanie 2/3",
        render: () => `
          <div>Kiedy nasza nastÄ™pna randka? ğŸ’˜</div>
          <div class="row">
            <button class="btnPrimary" data-a="nextDate" data-v="PiÄ…tek wieczÃ³r âœ¨">PiÄ…tek wieczÃ³r âœ¨</button>
            <button class="btnPrimary" data-a="nextDate" data-v="Sobota ğŸ¥°">Sobota ğŸ¥°</button>
            <button class="btnDark" data-a="nextDate" data-v="Ty wybierasz ğŸ’">Ty wybierasz ğŸ’</button>
          </div>
        `
      },
      {
        title: "Pytanie 3/3",
        render: () => `
          <div>NajwaÅ¼niejszeâ€¦ kochasz mnie? ğŸ˜³â¤ï¸</div>
          <div class="row">
            <button class="btnOk" data-a="love" data-v="Tak â¤ï¸">Tak â¤ï¸</button>
            <button class="btnPrimary" data-a="love" data-v="Bardzo ğŸ’˜">Bardzo ğŸ’˜</button>
            <button class="btnDark" data-a="love" data-v="Jeszcze jak ğŸ’ğŸ˜„">Jeszcze jak ğŸ’ğŸ˜„</button>
          </div>
          <div class="tiny">Na koÅ„cu przygotujÄ™ wiadomoÅ›Ä‡ do wysÅ‚ania na WhatsApp (prosto do mnie).</div>
        `
      }
    ];

    function showStep(i){
      panel.style.display = "block";
      qTitle.textContent = steps[i].title;
      qBox.innerHTML = steps[i].render();

      qBox.querySelectorAll("button[data-a]").forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const a = btn.getAttribute("data-a");
          const v = btn.getAttribute("data-v");
          answers[a] = v;

          megaPop();
          if(i < steps.length - 1) showStep(i+1);
          else finishFlow();
        });
      });
    }

    function finishFlow(){
      qTitle.textContent = "Gotowe âœ…";

      const msg =
        `Dla mojej Sandrusi ğŸ’– â€” odpowiedzi: ` +
        `PodobaÅ‚o mi siÄ™: ${answers.like}; ` +
        `NastÄ™pna randka: ${answers.nextDate}; ` +
        `Kocham CiÄ™: ${answers.love}. ` +
        `PS. ZostajÄ™ TwojÄ… walentynkÄ… ğŸ˜„ğŸ’˜`;

      qBox.innerHTML = `
        <div style="line-height:1.45; color:var(--muted);">
          Idealnie. Kliknij poniÅ¼ej i wyÅ›lij mi to na WhatsApp ğŸ˜„ğŸ’
        </div>
        <div class="row" style="margin-top:12px;">
          <button class="btnOk" id="copyBtn">Skopiuj wiadomoÅ›Ä‡</button>
          <a class="btn btnPrimary" id="waBtn" href="#" target="_blank" rel="noopener">WyÅ›lij na WhatsApp</a>
        </div>
        <div class="tiny">JeÅ›li WhatsApp nie otworzy siÄ™ automatycznie, skopiuj wiadomoÅ›Ä‡ i wklej rÄ™cznie.</div>
      `;

      const waUrl = `https://wa.me/${YOUR_WA_NUMBER}?text=` + encodeURIComponent(msg);
      document.getElementById("waBtn").href = waUrl;

      document.getElementById("copyBtn").onclick = async () => {
        const btn = document.getElementById("copyBtn");
        try{
          await navigator.clipboard.writeText(msg);
          btn.textContent = "Skopiowane âœ…";
          setTimeout(()=>btn.textContent="Skopiuj wiadomoÅ›Ä‡", 1400);
        }catch{
          btn.textContent = "Nie mogÄ™ skopiowaÄ‡ ğŸ˜…";
          setTimeout(()=>btn.textContent="Skopiuj wiadomoÅ›Ä‡", 1400);
        }
      };

      finaleShow();
    }

    yesBtn.addEventListener("click", ()=>{
      yesBtn.disabled = true;
      noBtn.disabled = true;

      result.textContent = `${pick(YES_HEADLINES)} ${pick(LOVE_LINES)}`;
      comic.style.display = "flex";

      startHearts();
      finaleBurst();
      showStep(0);
    });

    // ====== Effects canvas ======
    const canvas = document.getElementById("fx");
    const ctx = canvas.getContext("2d");
    function resize(){ canvas.width = innerWidth; canvas.height = innerHeight; }
    addEventListener("resize", resize); resize();

    let particles = [];
    let running = false;

    function addParticles(list){
      particles.push(...list);
      if(!running){
        running = true;
        requestAnimationFrame(tick);
      }
    }

    function tick(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      const gravity = 0.06;

      particles = particles.filter(p => p.life > 0 && p.a > 0.02);

      for(const p of particles){
        p.vy += (p.type === "conf" ? gravity : gravity*0.4);
        p.x += p.vx;
        p.y += p.vy;
        p.vx *= 0.995;
        p.vy *= 0.995;
        p.life -= 1;
        p.a *= 0.988;

        ctx.globalAlpha = p.a;

        if(p.type === "conf"){
          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          p.rot += p.vr;
          ctx.fillStyle = p.c;
          ctx.fillRect(-p.s/2, -p.s/2, p.s, p.s*0.65);
          ctx.restore();
        }else{
          ctx.beginPath();
          ctx.fillStyle = p.c;
          ctx.arc(p.x, p.y, p.s, 0, Math.PI*2);
          ctx.fill();
        }
      }

      ctx.globalAlpha = 1;

      if(particles.length) requestAnimationFrame(tick);
      else running = false;
    }

    const colors = ["#ff4d7d","#35d3ff","#ffd66e","#ffffff","#35ff9a","#caa7ff"];

    function confettiRain(intensity=760){
      const cx = innerWidth/2, cy = innerHeight*0.22;
      const list = [];
      for(let i=0;i<intensity;i++){
        list.push({
          type:"conf",
          x: cx + rnd(-160,160),
          y: cy + rnd(-90,90),
          vx: rnd(-3.6,3.6),
          vy: rnd(-4.2,2.2),
          s: rnd(6,12),
          rot: rnd(0, Math.PI*2),
          vr: rnd(-0.16,0.16),
          c: colors[Math.floor(rnd(0, colors.length))],
          a: 1,
          life: Math.floor(rnd(150, 290))
        });
      }
      addParticles(list);
    }

    function burstAt(x,y,count=140, soft=false){
      const palette = soft ? ["#ffffff","#ffd66e","#ff4d7d","#caa7ff"] : ["#ff4d7d","#35d3ff","#ffd66e","#35ff9a","#caa7ff","#ffffff"];
      const list = [];
      for(let i=0;i<count;i++){
        const ang = rnd(0, Math.PI*2);
        const sp  = soft ? rnd(0.9,3.4) : rnd(1.8,6.8);
        list.push({
          type:"spark",
          x, y,
          vx: Math.cos(ang)*sp,
          vy: Math.sin(ang)*sp - (soft ? 0.2 : 1.1),
          s: rnd(1.6, 4.1),
          c: palette[Math.floor(rnd(0, palette.length))],
          a: 1,
          life: Math.floor(rnd(80, 155))
        });
      }
      addParticles(list);
    }

    function finaleBurst(){
      confettiRain(820);
      for(let i=0;i<16;i++){
        setTimeout(()=>{
          burstAt(rnd(innerWidth*0.12, innerWidth*0.88), rnd(innerHeight*0.08, innerHeight*0.66), 170, false);
        }, i*95);
      }
    }

    function megaPop(){
      confettiRain(320);
      burstAt(rnd(innerWidth*0.25, innerWidth*0.75), rnd(innerHeight*0.16, innerHeight*0.68), 120, true);
    }

    function finaleShow(){
      confettiRain(980);
      for(let i=0;i<20;i++){
        setTimeout(()=>{
          burstAt(rnd(innerWidth*0.10, innerWidth*0.90), rnd(innerHeight*0.08, innerHeight*0.72), 200, false);
        }, i*85);
      }
    }

    document.addEventListener("click", (e)=>{
      const t = e.target;
      if(t && (t.tagName === "BUTTON" || t.tagName === "A")) return;
      burstAt(e.clientX, e.clientY, 46, true);
    });
  </script>
</body>
</html>
